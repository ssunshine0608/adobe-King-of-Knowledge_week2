<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Adobe çŸ¥è­˜ç‹æŒ‘æˆ°è³½ï½œWeek 2</title>

  <!-- React / Babel / Tailwind -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Confetti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>

  <style>
    html, body, #root {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      background: #0b1020;
    }
    body {
      font-family: "Noto Sans TC", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      user-select: none;
      -webkit-user-select: none;
    }
    ::-webkit-scrollbar { display: none; }

    /* =========================
       é¡Œç›®å¡å‹•ç•«ï¼ˆæœ€ç©©ç‰ˆï¼‰
       ========================= */
    .q-card {
      width: 100%;
      height: 100%;
      transform: translateZ(0);
      will-change: transform, opacity;
    }

    /* é€²å ´ï¼šå–®ç´”ç”±ä¸Šå¾€ä¸‹æ»‘ */
    .q-enter {
      animation: qEnter 520ms cubic-bezier(.22,.92,.18,1) both;
    }
    @keyframes qEnter {
      from {
        opacity: 0;
        transform: translate3d(0, -22%, 0);
      }
      to {
        opacity: 1;
        transform: translate3d(0, 0, 0);
      }
    }

    /* é€€å ´ï¼šåªåšå·¦æ»‘ + æ·¡å‡ºï¼ˆæœ€ä¸æœƒå¡ï¼‰ */
    .q-exit {
      animation: qExit 320ms ease-out both;
    }
    @keyframes qExit {
      from {
        opacity: 1;
        transform: translate3d(0, 0, 0);
      }
      to {
        opacity: 0;
        transform: translate3d(-30%, 0, 0);
      }
    }

    /* =========================
       çµæœé æŒ‰éˆ•
       ========================= */
    .btn-orange {
      background: linear-gradient(90deg, #f59e0b 0%, #f97316 100%);
      color: #ffffff;
      text-shadow: 0 1px 2px rgba(0,0,0,.35); /* âœ… ç™½å­—å¾®é™°å½± */
    }
  </style>
</head>

<body>
<div id="root"></div>

<script type="text/babel">
  const QUESTIONS = [
    { image: "q1.jpg", correct: 2 },
    { image: "q2.jpg", correct: 1 },
    { image: "q3.jpg", correct: 3 },
    { image: "q4.jpg", correct: 0 },
    { image: "q5.jpg", correct: 0 },
  ];

  const CDN = "https://cdn.jsdelivr.net/gh/ssunshine0608/adobe-King-of-Knowledge_week2@main/";

  function App() {
    const [idx, setIdx] = React.useState(0);
    const [score, setScore] = React.useState(0);
    const [anim, setAnim] = React.useState("enter");
    const [done, setDone] = React.useState(false);

    const answer = (i) => {
      if (i === QUESTIONS[idx].correct) setScore(s => s + 20);
      setAnim("exit");
      setTimeout(() => {
        if (idx === QUESTIONS.length - 1) {
          setDone(true);
        } else {
          setIdx(idx + 1);
          setAnim("enter");
        }
      }, 320);
    };

    if (done) {
      return (
        <div className="h-full flex flex-col items-center justify-center text-white px-6 text-center">
          <div className="text-6xl font-black mb-4">{score} åˆ†</div>

          {score === 100 ? (
            <>
              <div className="text-xl text-amber-300 font-bold mb-4">
                ğŸ† æ­å–œç²å¾—æ»¿åˆ†ï¼
              </div>
              <button className="btn-orange px-6 py-4 rounded-2xl font-bold text-lg">
                ğŸ åˆ†äº«ä¸¦é ˜å–çå‹µ
              </button>
            </>
          ) : (
            <>
              <div className="text-lg opacity-80 mb-6">
                å¿…é ˆé”åˆ° 100 åˆ†æ‰èƒ½è§£é–çå‹µ
              </div>
              <button
                onClick={() => window.location.reload()}
                className="px-6 py-3 rounded-xl bg-white/20"
              >
                å†ç©ä¸€æ¬¡
              </button>
            </>
          )}
        </div>
      );
    }

    return (
      <div className="h-full flex items-center justify-center px-4">
        <div className={"q-card " + (anim === "enter" ? "q-enter" : "q-exit")}>
          <img
            src={CDN + QUESTIONS[idx].image}
            className="w-full rounded-xl"
            draggable="false"
          />
          <div className="grid grid-cols-2 grid-rows-2 absolute inset-0">
            <div onClick={() => answer(0)} />
            <div onClick={() => answer(1)} />
            <div onClick={() => answer(2)} />
            <div onClick={() => answer(3)} />
          </div>
        </div>
      </div>
    );
  }

  ReactDOM.createRoot(document.getElementById("root")).render(<App />);
</script>
</body>
</html>
